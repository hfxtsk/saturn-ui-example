<template>
  <a-drawer
    :width="300"
    :mask="false"
    title="ç¤ºä¾‹å¯¼èˆª"
    :visible="visible"
    @close="onClose"
  >
    <a-tree
      v-model:selectedKeys="selectedKeys"
      v-model:expandedKeys="expandedKeys"
      :tree-data="treeData"
    ></a-tree>
  </a-drawer>
  <a-affix class="center" v-if="!visible">
    <ice-icon
      icon="icon-park-outline:indent-left"
      :size="30"
      @click="visible = true"
    ></ice-icon>
  </a-affix>
</template>
<script lang="ts" setup>
import { watch, ref } from "vue";
import { useRouter } from "vue-router";
import { IceIcon } from "saturn-ui";
import "saturn-ui/lib/theme-default/IceHeader1.css";

const treeData = [
  {
    title: "SaturnUIğŸª",
    key: "0-0",
    children: [
      {
        title: "å¤§å±ç»„ä»¶",
        key: "0-0-0",
        children: [
          { title: "IceHeader é¡µå¤´", key: "header" },
          { title: "IceIcon å›¾æ ‡", key: "icon" },
          { title: "IceMenu èœå•", key: "menu" },
          { title: "IceWrapper åŒ…è£…", key: "wrapper" },
          { title: "IcePanel é¢æ¿", key: "panel" },
          { title: "IceDialog å¯æ‹–åŠ¨é¢æ¿", key: "dialog" },
          { title: "IceList åˆ—è¡¨", key: "list" },
          { title: "IceScrollbar æ»šåŠ¨æ¡", key: "scrollbar" },
          { title: "IceClock æ—¶é’Ÿ", key: "clock" },
          { title: "IceWeather å¤©æ°”", key: "weather" },
          { title: "IceNumberFlop æ•°å­—ç¿»ç›˜", key: "numberflop" },
          { title: "IceChart å›¾è¡¨", key: "chart" },
          { title: "IceChartBar æŸ±çŠ¶å›¾", key: "chartbar" },
          { title: "IceChartPie é¥¼çŠ¶å›¾", key: "chartpie" },
          { title: "IceChartLine çº¿å½¢å›¾", key: "chartline" },
        ],
      },
      {
        title: "GISç»„ä»¶",
        key: "0-0-1",
        children: [
          { title: "IceEarth ä¸‰ç»´åœ°çƒ", key: "earth" },
          { title: "0-0-1-1", key: "0-0-1-1" },
          { title: "0-0-1-2", key: "0-0-1-2" },
        ],
      },
      {
        title: "Adminç»„ä»¶",
        key: "0-0-1",
        children: [
          { title: "0-0-1-0", key: "0-0-1-0" },
          { title: "0-0-1-1", key: "0-0-1-1" },
          { title: "0-0-1-2", key: "0-0-1-2" },
        ],
      },
    ],
  },
];

const selectedKeys = ref<string[]>([]);
const expandedKeys = ref<string[]>(["0-0-0", "0-0-1"]);

const router = useRouter();

watch(expandedKeys, () => {
});

watch(selectedKeys, () => {
  router.push(`/${selectedKeys.value[0]}`); // -> /user/eduardo
});

const visible = ref<boolean>(false);

const showDrawer = () => {
  visible.value = true;
};

const onClose = () => {
  visible.value = false;
};
</script>
<style>
.center {
  position: absolute;
  top: calc(50% - 32px);
  right: 0;
  z-index: 999;
  cursor: pointer;
  background-color: #fff;
  transform: translateX(-50%);
  opacity: 0.8;
  overflow: hidden;
}
</style>
